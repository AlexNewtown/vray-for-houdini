:: V-Ray For Houdini Windows Launcher
::
@echo off

:: Houdini location
set HFS=@HOUDINI_INSTALL_ROOT@

:: Use OpenVDB < 3
set HOUDINI13_VOLUME_COMPATIBILITY=1

:: V-Ray Application SDK variables
set VRAY_APPSDK=@APPSDK_ROOT@

:: V-Ray JSON plugin descriptions
set VRAY_PLUGIN_DESC_PATH=@CMAKE_SOURCE_DIR@\deploy\plugins_desc

:: V-Ray UI dialog scripts
set VRAY_UI_DS_PATH=@CMAKE_SOURCE_DIR@\deploy\ui

:: Phoenix loaders
set VRAY_FOR_HOUDINI_AURA_LOADERS=@Phoenix_LIBRARIES@

:: Houdini paths
set HOUDINI_PATH=@CMAKE_SOURCE_DIR@\deploy\vfh_home;^&
set HOUDINI_DSO_PATH=@VFH_DSO_DIRPATH@;^&

:: Report loading errors
set HOUDINI_DSO_ERROR=1

:: Add libs to path
if not exist dbgcore.dll (
	goto :includeCompat
) else (
	goto :noComapt
)

:noComapt
set PATH=%HFS%\bin;%VRAY_APPSDK%\bin;%PATH%;%VRAY_FOR_HOUDINI_AURA_LOADERS%
goto :startHOU

:includeCompat
set PATH=%HFS%\bin;%VRAY_APPSDK%\bin;%VRAY_APPSDK%\bin\compat;%PATH%;%VRAY_FOR_HOUDINI_AURA_LOADERS%
goto :startHOU

:startHOU
:: Start Houdini
::
start "V-Ray For Houdini" /D "%USERPROFILE%\Desktop\" "%HFS%\bin\houdini.exe" %*
